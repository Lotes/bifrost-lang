datatype Tree a {
  Leaf a,
  Branch (Tree a) (Tree a)
}

implementation Fibonacci { 
  in n: int;
  out result: int;
  match this.n with {
    case 0 {
      wire 0 to this.result;
    }
    case 1 {
      wire 1 to this.result;
    }
    case x {
      instance minusOne of Fibonacci;
      instance minusTwo of Fibonacci;
      wire x - 1 to minusOne.n;
      wire x - 2 to minusTwo.n;
      wire minusOne.result + minusTwo.result to this.result;
    }
  }
}