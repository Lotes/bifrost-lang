datatype Tree a {
  Leaf a,
  Branch (Tree a) (Tree a)
}

module Fibonacci {
  interface:
    in N: int
    out Result: int
  implementation:
    match this.N with {
      case A: int {
        instance NMinusOne of Fibonacci;
        instance NMinusTwo of Fibonacci;
        wire this.N - 1 to NMinusOne.N;
        wire this.N- 2 to NMinusTwo.N;
        wire NMinusOne.Result + NMinusTwo.Result to this.Result;
      }
    }
}